java {
    archivesBaseName = 'dawncraft-fixes-mod'
    toolchain.languageVersion = JavaLanguageVersion.of(17)
}

group = rootProject.group
version = rootProject.version

mixin {
    add sourceSets.main, "dawncraft-fixes.refmap.json"

    config "dawncraft-fixes.mixins.json"
}

// Include resources generated by data generators.
sourceSets.main.resources { srcDir 'src/generated/resources' }

dependencies {

    // Real mod deobf dependency examples - these get remapped to your current mappings
    // compileOnly fg.deobf("mezz.jei:jei-${mc_version}:${jei_version}:api") // Adds JEI API as a compile dependency
    // runtimeOnly fg.deobf("mezz.jei:jei-${mc_version}:${jei_version}") // Adds the full JEI mod as a runtime dependency
    // implementation fg.deobf("com.tterrag.registrate:Registrate:MC${mc_version}-${registrate_version}") // Adds registrate as a dependency

    // Examples using mod jars from ./libs
    implementation fg.deobf("curse.maven:braincellapi-616354:3820306")
    implementation fg.deobf("curse.maven:dannys-expansion-425918:3820328")

    implementation fg.deobf("curse.maven:epic-fight-mod-405076:5148975")
    implementation fg.deobf("curse.maven:epicfight-dual-greatsword-654098:4862284")

    implementation fg.deobf("curse.maven:unvoted-shelved-551999:4373652")
    implementation fg.deobf("curse.maven:goblins-dungeons-535096:3785691")
    implementation fg.deobf("curse.maven:callable-horses-331746:4111364")
    implementation fg.deobf("curse.maven:hit-indication-848933:4555284")

    implementation fg.deobf("curse.maven:untamedwilds-457252:4534274")
    implementation fg.deobf("curse.maven:citadel-331936:3783096")

    implementation fg.deobf("curse.maven:integrated-api-817709:4446913")
    runtimeOnly fg.deobf("curse.maven:feature-nbt-deadlock-be-gone-560323:3669114")

    implementation fg.deobf('dummy:Quest_Giver:1.18.2-1.0.10')
    runtimeOnly fg.deobf("curse.maven:guard-villagers-360203:3823106")
    runtimeOnly fg.deobf("curse.maven:reputation-579116:4412129")
    runtimeOnly fg.deobf("curse.maven:more-villagers-484954:3696031")
    runtimeOnly fg.deobf("curse.maven:libx-412525:3909225")
    runtimeOnly fg.deobf("curse.maven:dawncraft-tweaks-638098:4853154")
    runtimeOnly fg.deobf("curse.maven:atlas-lib-463826:4417565")
    runtimeOnly fg.deobf("curse.maven:orcz-581652:3945799")
    runtimeOnly fg.deobf("curse.maven:difficult-raids-599116:4578894")
    runtimeOnly fg.deobf("curse.maven:illage-and-spillage-576368:3912773")
    implementation fg.deobf("curse.maven:biome-makeover-forge-567709:4062225")
    runtimeOnly fg.deobf("curse.maven:hunterillager-318857:3752127")
    runtimeOnly fg.deobf("curse.maven:savage-and-ravage-381736:4396963")

    runtimeOnly fg.deobf("curse.maven:irons-spells-n-spellbooks-855414:4577001")
    runtimeOnly fg.deobf("curse.maven:caelus-308989:3650485")
    runtimeOnly fg.deobf("curse.maven:curios-309927:4590652")
    runtimeOnly fg.deobf("curse.maven:playeranimator-658587:4418152")
    runtimeOnly fg.deobf("curse.maven:geckolib-388172:4181370")
    runtimeOnly fg.deobf("curse.maven:architectury-api-419699:4521465")
    runtimeOnly fg.deobf("curse.maven:blueprint-382216:3991478")
    runtimeOnly fg.deobf("curse.maven:follow-me-463841:3919507")
    runtimeOnly fg.deobf("dummy:dawncraft_mobs:1.18-1.2.3")
    runtimeOnly fg.deobf("curse.maven:mowzies-mobs-250498:4142172")
    runtimeOnly fg.deobf("curse.maven:blood-and-madness-461017:4536670")
    runtimeOnly fg.deobf("curse.maven:ars-nouveau-401955:4543053")
    runtimeOnly fg.deobf("curse.maven:patchouli-306770:3846086")

    implementation fg.deobf("curse.maven:alexs-cloud-storage-606618:3757407")

    implementation fg.deobf("curse.maven:shrines-structures-418915:3836227")

    implementation fg.deobf("curse.maven:revamped-phantoms-575418:3694669")

    implementation fg.deobf("dummy:irons_spellbooks-1.18.2:1.1.4.3")

    implementation fg.deobf("curse.maven:meet-your-fight-409371:3837351")

//    runtimeOnly fg.deobf("curse.maven:terralith-513688:4559078")
//    runtimeOnly fg.deobf("curse.maven:cristel-lib-856996:4531755")
//
    implementation fg.deobf("curse.maven:blue-skies-312918:3788736")
    runtimeOnly fg.deobf("curse.maven:structure-gel-api-378802:4804138")

    implementation fg.deobf("curse.maven:l_ender-s-cataclysm-551586:4418426")

    implementation fg.deobf("curse.maven:weapons-of-miracles-epicfight-918614:5135428")
    runtimeOnly fg.deobf("curse.maven:epic-sanji-690400:4862281")

    implementation fg.deobf("curse.maven:epic-fight-infernal-gainer-950270:5093614")

    runtimeOnly fg.deobf("curse.maven:modernfix-790626:5025328")

    implementation fg.deobf("curse.maven:shoulder-surfing-reloaded-243190:5167363")
    runtimeOnly fg.deobf("curse.maven:monster-plus-676418:4496901")

    implementation fg.deobf("curse.maven:mutant-monsters-852665:4569845")
    runtimeOnly fg.deobf("curse.maven:puzzles-lib-495476:5114509")

    implementation fg.deobf("curse.maven:configured-457570:4462832")

//    implementation fg.deobf("curse.maven:obscure-tooltips-715660:4132232")
//    implementation fg.deobf("curse.maven:obscure-api-638417:4259349")

    implementation fg.deobf("curse.maven:apotheosis-313970:4634636")
    implementation fg.deobf("curse.maven:placebo-283644:4500363")
    implementation fg.deobf("curse.maven:epic-knights-armor-and-weapons-509041:4695781")
    runtimeOnly fg.deobf("curse.maven:cloth-config-348521:4973439")

    // For more info...
    // http://www.gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html
    // http://www.gradle.org/docs/current/userguide/dependency_management.html

    implementation annotationProcessor("io.github.llamalad7:mixinextras-common:${mixin_extras_version}")
    implementation jarJar("io.github.llamalad7:mixinextras-forge:${mixin_extras_version}") {
        transitive = false
        jarJar.ranged it, "[${mixin_extras_version},)"
    }

//    implementation(annotationProcessor("com.github.bawnorton.mixinsquared:mixinsquared-common:$mixin_squared_version"))
//    implementation(jarJar("com.github.bawnorton.mixinsquared:mixinsquared-forge:$mixin_squared_version")) {
//        jarJar.ranged(it, "[$mixin_squared_version,)")
//    }

    annotationProcessor 'org.spongepowered:mixin:0.8.5:processor'
}

artifacts {
    add("default", tasks.jarJar)
}

jar {
    manifest {
        attributes([
                "Specification-Title"     : "dawncraftfixes",
                "Specification-Vendor"    : "SettingDust",
                "Specification-Version"   : "1", // We are version 1 of ourselves
                "Implementation-Title"    : project.name,
                "Implementation-Version"  : project.jar.archiveVersion,
                "Implementation-Vendor"   : "SettingDust",
                "Implementation-Timestamp": new Date().format("yyyy-MM-dd'T'HH:mm:ssZ"),
        ])
    }
}

jar.finalizedBy('reobfJar')

tasks.jarJar {
    mustRunAfter('reobfJar')
    archiveClassifier = ""
    from "LICENSE"
    finalizedBy(reobf.maybeCreate("jarJar"))
}

tasks.withType(JavaCompile).configureEach {
    options.encoding = 'UTF-8' // Use the UTF-8 charset for Java compilation
}
